/* =========================
   LOADER
========================= */
window.addEventListener("load", () => {
  document.getElementById("loader").style.display = "none";
});

/* =========================
   CUSTOM CURSOR (DESKTOP)
========================= */
const cursor = document.querySelector(".cursor");
document.addEventListener("mousemove", e => {
  if (!cursor) return;
  cursor.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`;
});

/* =========================
   SMOOTH SCROLL ENGINE
========================= */
let currentScroll = window.scrollY;
let targetScroll = currentScroll;
let ease = 0.08;

function smoothScroll() {
  targetScroll = window.scrollY;
  currentScroll += (targetScroll - currentScroll) * ease;
  window.scrollTo(0, currentScroll);
  requestAnimationFrame(smoothScroll);
}

smoothScroll();

/* =========================
   SCROLL REVEAL (SMOOTHER)
========================= */
const reveals = document.querySelectorAll(".reveal");

function revealOnScroll() {
  reveals.forEach(el => {
    const rect = el.getBoundingClientRect();
    if (rect.top < window.innerHeight - 120) {
      el.classList.add("active");
    }
  });
}

window.addEventListener("scroll", revealOnScroll);
revealOnScroll();

/* =========================
   3D TILT CARDS
========================= */
document.querySelectorAll(".tilt").forEach(card => {
  card.addEventListener("mousemove", e => {
    const r = card.getBoundingClientRect();
    const x = e.clientX - r.left;
    const y = e.clientY - r.top;

    const rotateX = -(y - r.height / 2) / 18;
    const rotateY = (x - r.width / 2) / 18;

    card.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
  });

  card.addEventListener("mouseleave", () => {
    card.style.transform = "rotateX(0) rotateY(0)";
  });
});

/* =========================
   TYPING EFFECT
========================= */
const text = "Anup Lamichhane";
let index = 0;

function typingEffect() {
  if (index < text.length) {
    document.getElementById("typing").textContent += text[index];
    index++;
    setTimeout(typingEffect, 120);
  }
}
typingEffect();

/* =========================
   THEME TOGGLE
========================= */
const toggle = document.getElementById("themeToggle");
toggle.addEventListener("click", () => {
  document.body.classList.toggle("light");
  toggle.textContent = document.body.classList.contains("light") ? "â˜€ï¸" : "ðŸŒ™";
});

/* =========================
   HOVER SOUND
========================= */
const sound = document.getElementById("clickSound");
document.querySelectorAll(".sound").forEach(el => {
  el.addEventListener("mouseenter", () => {
    sound.currentTime = 0;
    sound.play();
  });
});
